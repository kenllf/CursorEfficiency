# 功能开发指南

## 关键原则
1. 文档先行 - 在开发前完成所有文档
2. 需求为纲 - 以需求为指导制定计划
3. 循序渐进 - 按计划逐步推进
4. 及时检查 - 持续检查及时纠正
5. 适度平衡 - 避免过度检查和修改
6. MECE原则 - 确保分析和规划互斥且完备
   - 需求分析覆盖所有场景无遗漏
   - 任务拆分边界清晰不重叠
   - 检查机制完整且不重复

## 1. 需求阶段
- 明确功能需求和目标
  - 遵循 MECE 原则进行需求分析
  - 确保场景覆盖完整无遗漏
  - 明确各需求点之间的边界
  - 避免需求之间的重叠冲突

- 完善所有必要文档
  - 产品需求文档 (@docs/product-requirements.md)
  - 技术设计文档 (@docs/technical-design.md) 
  - API设计文档 (@docs/api-design.md)
  - 其他配套文档

- 需求自检
  - 分析需求完整性
    - 检查功能点覆盖
    - 验证场景完整性
    - 确认边界定义
  - 评估需求合理性
    - 检查逻辑一致性
    - 验证可实现性
    - 识别潜在风险
  - 确保 MECE 原则
    - 验证需求无遗漏
    - 检查需求无重叠
    - 确认边界清晰

- 检查清单
  - □ 需求是否完整且明确?
  - □ 各文档是否一致?
  - □ 是否考虑了所有场景?
  - □ 风险是否充分识别?
  - □ 需求是否符合 MECE 原则?
    - □ 场景覆盖是否完整?
    - □ 需求之间是否有重叠?
    - □ 边界定义是否清晰?
  - □ 自检发现的问题是否已解决?
  - □ 自检建议是否已采纳?

- ✓ 所有检查项通过后方可进入下一阶段

## 2. 设计阶段
- 制定执行计划
  - 遵循 MECE 原则拆分任务
    - 确保任务覆盖所有需求
    - 避免任务之间的重叠
    - 明确定义任务边界
  - 确定实施顺序
  - 识别关键节点

- 细化实施方案
  - 明确开发步骤
  - 制定风险对策
  - 确保方案完整覆盖所有任务
  - 避免步骤之间的重复工作

- 方案自检
  - 分析方案完整性
    - 验证需求覆盖
    - 检查步骤完整性
    - 确认资源规划
  - 评估方案可行性
    - 分析技术路线
    - 评估实现难度
    - 验证时间安排
  - 风险识别
    - 分析潜在风险
    - 评估应对措施

- 检查清单
  - □ 方案是否完全覆盖需求?
  - □ 计划是否具体可行?
  - □ 资源是否能够保障?
  - □ 风险对策是否到位?
  - □ 任务拆分是否符合 MECE 原则?
    - □ 是否覆盖所有需求?
    - □ 任务之间是否有重叠?
    - □ 任务边界是否清晰?
  - □ 自检发现的问题是否已解决?
  - □ 自检建议是否已采纳?

- ✓ 所有检查项通过后方可进入下一阶段

## 3. 开发阶段
- 按计划逐步实现
  - 确保功能实现完整
  - 避免重复开发

- 保持代码提交原子性

- 执行单元测试
  - 遵循 MECE 原则设计测试用例
  - 确保测试覆盖完整
  - 避免重复测试场景

- 代码自检
  - 静态代码分析
    - 检查代码规范
    - 分析代码结构
    - 识别潜在问题
  - 实现正确性验证
    - 验证功能完整性
    - 检查边界条件
    - 确认异常处理
  - 测试覆盖分析
    - 评估测试覆盖率
    - 验证测试用例
    - 确认测试结果

- 处理发现的问题

- 添加必要的日志
  - 遵循日志规范 (@docs/logging-guidelines.md)
  - 确保日志信息完整
  - 选择合适的日志级别

- 检查清单
  - □ 代码是否符合设计要求?
  - □ 测试是否覆盖关键路径?
  - □ 发现的问题是否已解决?
  - □ 提交是否保持原子性?
  - □ 日志是否符合规范?
    - □ 是否遵循日志格式规范?
    - □ 日志级别是否合适?
    - □ 是否包含必要的上下文?
  - □ 测试设计是否符合 MECE 原则?
    - □ 测试用例是否完整覆盖?
    - □ 是否存在重复测试?
    - □ 测试边界是否明确?
  - □ 自检发现的问题是否已解决?
  - □ 自检建议是否已采纳?

- ✓ 所有检查项通过后方可进入下一阶段

## 4. 优化阶段
- 代码优化
  - 遵循 MECE 原则规划优化项
    - 确保优化覆盖所有关键点
    - 避免重复优化
    - 明确优化范围和边界
  - 聚焦于必要的优化
  - 严格禁止过度优化
  - 性能改进
    - 识别性能瓶颈
    - 优化关键路径
    - 验证优化效果
  - 代码重构
    - 消除重复代码
    - 提高代码复用性
    - 优化代码结构
  - 日志规范
    - 对照日志规范文档 (@docs/logging-guidelines.md) 进行检查
      - □ 是否符合日志级别定义?
      - □ 是否清理了非必要日志?
      - □ 是否正确处理生产环境日志?

- 文档同步
  - 更新技术文档
  - 补充关键注释
  - 完善接口文档

- 优化自检
  - 性能分析
    - 收集性能指标
    - 对比优化效果
    - 验证性能目标
  - 代码质量评估
    - 分析代码复杂度
    - 检查代码重复
    - 评估可维护性
  - 功能完整性确认
    - 验证核心功能
    - 检查边界场景
    - 确认兼容性

- 检查清单
  - □ 代码优化
    - □ 性能是否达到预期指标?
    - □ 代码结构是否更清晰?
    - □ 是否消除了重复代码?
  - □ 日志规范
    - □ 是否清理了调试日志?
    - □ 是否只保留必要日志?
    - □ 日志格式是否统一?
    - □ 日志级别是否合适?
  - □ 文档完整
    - □ 技术文档是否同步?
    - □ 注释是否完整准确?
    - □ 接口文档是否更新?
  - □ 质量保证
    - □ 是否引入新的问题?
    - □ 测试是否全部通过?
    - □ 功能是否保持完整?
  - □ 优化规划是否符合 MECE 原则?
    - □ 优化项是否完整覆盖?
    - □ 是否存在重复优化?
    - □ 优化边界是否清晰?
  - □ 优化效果是否已验证?
  - □ 自检发现的问题是否已解决?
  - □ 自检建议是否已采纳?

- ✓ 所有检查项通过后方可结束
